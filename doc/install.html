<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Rivet installation</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <!-- $Id$ -->
    <h2 align="center">Rivet Installation</h2>

    <ol>
      <li><b>Check dependencies</b><br>

	To install Rivet, you will need <b>Tcl 8.2</b> or greater
	and <b>Apache 1.3.xx</b>.  It is known to run on Linux,
	FreeBSD, OpenBSD, and Solaris and HPUX.  NT is also possible -
	please see the directions in the distribution.
      </li>

      <li><b>Get Rivet</b><br>
<!--	If you are running a Debian or FreeBSD system, there
	are pre-built packages available at:
	<a target="_top" href="http://www.debian.org/Packages/unstable/web/libapache-mod-rivet.html">http://www.debian.org/Packages/unstable/web/libapache-mod-rivet.html</a>

	or

	<a target="_top"
	  href="http://www.freebsd.org/cgi/ports.cgi?query=Rivet">http://www.freebsd.org/cgi/ports.cgi?query=Rivet</a>.<br>
	  -->

	Download the sources at <a target="_top"
	href="download/">http://tcl.apache.org/Rivet/download/</a>.

      </li>
      <li><b>Uncompress the sources</b><br>
	<code>
	  gunzip apache-1.3.X.tar.gz<br>
	  tar -xvf apache-1.3.X.tar.gz<br>
	</code>
	You don't need the Apache sources if you are building a shared
	object module.  You do, however, need the header files.
	Some systems, such as Debian GNU/Linux, provide these
	independently - otherwise, you probably still need the sources.<br>
	<code>
	  gunzip Rivet-X.X.X.tar.gz<br>
	  tar -xvf Rivet-X.X.X.tar.gz<br>
	</code>
      </li>

      <li><b>Configuring, buildrivet.sh, etc...</b><br>

	Do you want to build Rivet as a shared object (such as a
	.so file on Linux, or a .dll on windows), or compile it
	directly as a part of the Apache executable?  The Apache
	Software Foundation has put together a nice <a target="_top"
	href="http://httpd.apache.org/docs/dso.html">manual</a> which
	explains things in detail.

	<ul>
	  <li><b>For shared objects</b><br>

	    <code>cd ../tcl-rivet/<br></code> Edit the
	    <code>make.tcl</code> script.  You need to change the
	    <code>INC</code> variable to reflect the location of your
	    Apache include files.
	    <p>
	      Run the Tcl "make" script:<br>
	    <code>
	      ./make.tcl
	    </code><br>
	    </p>
	    <p>
	      <code>
		cp mod_rivet.so&nbsp;/usr/lib/apache/libexec/...
	      </code> <br>
	      For shared object builds, you need to copy the object
	      into the directory where the other shared objects are
	      kept for your Apache build.  On Debian GNU/Linux
	      systems, for instance, this is in
	      <code>/usr/lib/apache/1.3/</code>.
	    </p>
	  </li>

	  <li><b>For static builds</b><br>
	    <code>
	      cd apache-1.3.X/<br>
	      ./configure [<b>without</b> options]<br>
	    </code>

	    <code>cd path/to/tcl-rivet/<br></code> Edit the
	    <code>make.tcl</code> script.  You need to change the
	    <code>INC</code> variable to reflect the location of your
	    Apache include files.<br>
	    <code>
	      ./make.tcl static
	    </code><br>

	    <code>
	      ./make.tcl install
	    </code><br>

	    <code>cd ../apache-1.3.X<br></code>
	    <code>./configure&nbsp;--activate-module=src/modules/Rivet/Rivet.a&nbsp;[&nbsp;other&nbsp;configure&nbsp;options&nbsp;]<br></code>
	    <code>export EXTRA_LIBS="-ltcl8.X -lm"</code><br>
	    <code>make -e<br></code>
	    <code>make install<br></code>

	  </li>
	</ul>
      </li>
      <li><b>Configure Apache<br></b>
	<ul>
	  <li>
	    <b>http.conf</b><br> <code>LoadModule rivet_module
	      /usr/lib/apache/1.3/mod_rivet.so</code><br>
	    This points Apache to the shared object if
	    Rivet is being used as a loadable module.
	  </li>
	  <li>
	    <b>srm.conf</b><br>
	    <code>AddType application/x-httpd-rivet .rvt</code><br>
	    <code>AddType application/x-rivet-tcl .tcl</code>
	    (optional)<br>
	    These add the .rvt and .tcl (if desired) types to
	    Apache, so that they are processed by Rivet.
	  </li>
	</ul>
      </li>
    </ol>
  </body>
</html>
