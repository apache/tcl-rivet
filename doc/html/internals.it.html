<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Rivet Internals</title><link rel="stylesheet" href="rivet.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><link rel="home" href="index.it.html" title="Apache Rivet"><link rel="up" href="index.it.html" title="Apache Rivet"><link rel="previous" href="help.it.html" title="Risorse - Come ottenere aiuto"><link rel="next" href="upgrading.it.html" title="Aggiornamenti da mod_dtcl o NeoWebScript"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Rivet Internals</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="help.it.html"><img src="images/prev.png" alt="Indietro"></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="upgrading.it.html"><img src="images/next.png" alt="Avanti"></a></td></tr></table></div><div class="section" lang="it"><div class="titlepage"><div><div><hr><h2 class="title" style="clear: both"><a name="internals"></a>Rivet Internals</h2></div></div><div></div></div><div class="toc"><dl><dt><span class="section"><a href="internals.it.html#id4697914">Inizializzazione</a></span></dt><dt><span class="section"><a href="internals.it.html#id4697948">RivetChan</a></span></dt><dt><span class="section"><a href="internals.it.html#id4697968">Parsing delle pagine, Esecuzione e Cacheing</a></span></dt></dl></div><p style="width:90%">
      Questa sezione facilmente pare sorpassata, come nuovo codice 
      viene aggiunto, vecchio codice viene rimosso e di conseguenza
      vengono apportati i relativi cambiamenti. Il miglior posto 
      dove poter verificare se sono state inserite nuove funzionalità
      è il suo codice sorgente. Se siete interessati ai cambiamenti 
      osservate il FIXME.
    </p><div class="section" lang="it"><div class="titlepage"><div><div><h3 class="title"><a name="id4697914"></a>Inizializzazione</h3></div></div><div></div></div><p style="width:90%">
	Quando Apache è attivo, (o quando i processi figli di Apache
	sono attivi se un processo Tcl è in uso),
	<tt class="function">Rivet_InitTclStuff</tt> viene chiamata, 
	creando un nuovo interprete, o un interprete per host virtuale,
	dipendentemente dalla configurazione. Inoltre inizializza varie
	cose, come il canale di sistema 
	<span class="structname">RivetChan</span>, crea i comandi Tcl specifici 
	di Rivet ed esegue <tt class="filename">init.tcl</tt>. 
	Il sistema di caching è anch'esso impostato e se c'è un 
	<span style="font-family:monospace"><span><b class="command">GlobalInitScript</b></span></span>, viene eseguito.
      </p></div><div class="section" lang="it"><div class="titlepage"><div><div><h3 class="title"><a name="id4697948"></a>RivetChan</h3></div></div><div></div></div><p style="width:90%">
	Il sistema <span class="structname">RivetChan</span> fu creato al fine
	di avere un canale Tcl reale che potesse redirigere lo standard
	output. Questo permette di usare, per esempio, il comando
	normale <span style="font-family:monospace"><span><b class="command">puts</b></span></span> nelle pagine .rvt. Lavora
	creando un canale che bufferizza l'output e, a tempi
	predeterminati, lo passa al sistema IO di Apache. Il normale
	standard output di Tcl è rimpiazzato con un'istanza di questo
	tipo di canale, in modo che, predefinitamente, l'output venga
	inviato alla pagina web.
      </p></div><div class="section" lang="it"><div class="titlepage"><div><div><h3 class="title"><a name="id4697968"></a>Parsing delle pagine, Esecuzione e Cacheing</h3></div></div><div></div></div><p style="width:90%">
	Quando una pagina Rivet viene richiesta, è trasformata in un
	normale script Tcl tramite l'analisi nel file delle etichette di
	elaborazione delle istruzioni &lt;? ?&gt;. Ogni cosa fuori da
	queste etichette diviene un'istruzione estesa
	<span style="font-family:monospace"><span><b class="command">puts</b></span></span> ed ogni cosa dentro rimane codice Tcl.
      </p><p style="width:90%">
	Ogni file .rvt è valutato nel proprio
	<tt class="constant">::request</tt> namespace, in modo che non sia
	necessario creare e distruggere gli interpreti dopo ogni
	pagina. Tuttavia, operando nel proprio namespace, ogni pagina
	non verrà eseguita sporcando le variabili locali create da altri
	scripts, perché verranno cancellate automaticamente quando il
	namespace termina, dopo che Apache ha finito di gestire le
	richieste.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Nota</th></tr><tr><td colspan="2" align="left" valign="top">Un problema corrente con questo sistema è che, mentre le
      variabili usano la garbage collection, e quindi vengono distrutte
      automaticamente quando non sono più usate, i gestori dei file non
      lo sono: è molto importante quindi che gli autori di script Rivet
      si assicurino di chiudere tutti i file che hanno aperto.
      </td></tr></table></div><p style="width:90%">
      </p><p style="width:90%">
	Dopo che uno script è stato caricato ed analizzato dentro
	una form di "puro Tcl", viene pure immagazzinato, affinché possa
	essere utilizzato in futuro senza ricaricarlo (e rianalizzarlo)
	da disco. Il numero degli script immagazzinati in memoria è
	configurabile. Questa caratteristica può significativamente
	migliorare l'esecuzione.
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="help.it.html"><img src="images/prev.png" alt="Indietro"></a> </td><td width="20%" align="center"><a accesskey="u" href="index.it.html"><img src="images/up.png" alt="Risali"></a></td><td width="40%" align="right"> <a accesskey="n" href="upgrading.it.html"><img src="images/next.png" alt="Avanti"></a></td></tr><tr><td width="40%" align="left" valign="top">Risorse - Come ottenere aiuto </td><td width="20%" align="center"><a accesskey="h" href="index.it.html"><img src="images/home.png" alt="Partenza"></a></td><td width="40%" align="right" valign="top"> Aggiornamenti da mod_dtcl o NeoWebScript</td></tr></table></div></body></html>
